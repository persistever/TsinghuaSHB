<!--登录页面-->
<view class="background">
  <view class="endview" style="width:100%; height:200rpx;"></view>
  <view style="width:100%; height:150rpx; margin-left:50rpx;display: flex">
    <image src="../../images/programIcon.png" mode="aspectFill" style="width:150rpx; height:150rpx;"/>
    <text style="margin-left:50rpx; font-size: 50rpx; font-weight: bold; line-height:150rpx;">清华二手书信息平台</text>
  </view>
  
  <view style="width:100%; height:100rpx"></view>
  <view class="userIcon">
    <open-data type="userAvatarUrl"></open-data>
  </view>
  <view style="width:100%; height:10rpx"></view>
  <view style="text-align:center">
    <open-data type="userNickName" lang="zh_CN"></open-data>
  </view>


  <view wx:if="{{!haveAuth}}">
    <view style="width:100%; height:20rpx"></view>
    <button wx:if="{{canIUse}}" open-type="getUserInfo" bindgetuserinfo="bindAuthorizeButton">授权登录</button>
    <view wx:else>请升级微信版本</view>
  </view>
  <view wx:else>
    <view wx:if="{{!isRegistered}}">
      <view style="width:100%; height:50rpx"></view>
      <view class="container" style="width:100%; height:100rpx;">
        <text style="margin-left:auto; margin-right:auto; font-size: 40rpx;font-weight: bold; line-height:100rpx;">目前暂只支持清华邮箱验证注册</text>
      </view>
      <view class="container" style="width:100%; height:50rpx">
        <input class="inputEmail" bindinput="bindGetEmailAddress"/>
        <picker class="chooseEmailDomain" bindchange="bindPickerChange" value="{{domainIndex}}" range="{{domainArray}}">
        <view class="picker">{{domainArray[domainIndex]}}</view>
        </picker>
      </view>
      <view style="width:100%; height:20rpx"/>
      <view class="container" style="width:100%; height:100rpx">
        <button class="requireCodeButton" bindtap="bindRequireCodeButton" disabled="{{requireCodeButtonDisable}}">{{requireCodeButtonDisplay[requireCodeStatus]}}<text wx:if="{{requireCodeButtonDisable}}">({{countDownNum}}s)</text></button>
      </view>
      <view class="container" style="width:100%; height:100rpx">
        <input class="verifyCode" bindinput="bindGetInputCode"/>
        <button class="verifyCodeButton" bindtap="bindVerifyCodeButton">验证并注册</button>
      </view>
    </view>
  </view>
</view>
